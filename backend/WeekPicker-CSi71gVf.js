import{r as p,j as e,B as u,T as h,f as b,I as k,d as m}from"./index-CKLgkD1v.js";import{I as w}from"./InfoOutlined-CEViPEnt.js";import{p as j,a as n}from"./timetableUtils-zizOuD1G.js";import{F as A}from"./Select-JmEIo2-X.js";import{G as S}from"./Grid-CW7wBfPk.js";import{F as I,C as T}from"./FormControlLabel-Yt6LKP0L.js";import{F as E}from"./TextField-CAILEkKj.js";const _=({totalWeeks:a=18,value:x,onChange:i,label:y="选择周次",error:c,helperText:d,disabled:r=!1})=>{const[s,l]=p.useState(()=>j(x,a));p.useEffect(()=>{l(j(x,a))},[x,a]);const C=t=>{if(r)return;const o=[...s];o[t]=!o[t],l(o),i(n(o))},z=()=>{if(r)return;const t=new Array(a).fill(!0);l(t),i(n(t))},B=()=>{if(r)return;const t=new Array(a).fill(!1);l(t),i(n(t))},v=()=>{if(r)return;const t=s.map((o,f)=>(f+1)%2!==0);l(t),i(n(t))},g=()=>{if(r)return;const t=s.map((o,f)=>(f+1)%2===0);l(t),i(n(t))},F=p.useMemo(()=>n(s),[s]);return e.jsxs(A,{error:c,disabled:r,fullWidth:!0,component:"fieldset",variant:"outlined",sx:{p:1.5,borderRadius:1,border:c?"1px solid #d32f2f":"1px solid rgba(0, 0, 0, 0.23)","&:hover":{borderColor:c?"#d32f2f":"text.primary"}},children:[e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(h,{variant:"subtitle1",component:"legend",sx:{mb:0,fontSize:"1rem",color:c?"error.main":"text.primary"},children:[y,e.jsx(b,{title:"点击选择教学周次。可选择单周、连续周或间隔周。选定后会自动生成符合格式的周次字符串。",children:e.jsx(k,{size:"small",sx:{ml:.5,color:"text.secondary"},"aria-label":"周次选择说明",children:e.jsx(w,{fontSize:"inherit"})})})]}),e.jsxs(h,{variant:"caption",color:"textSecondary",children:["已选: ",F||"无"]})]}),e.jsx(S,{container:!0,spacing:0,sx:{maxHeight:180,overflowY:"auto",mb:1,borderTop:"1px solid #eee",borderBottom:"1px solid #eee",py:1},children:s.map((t,o)=>e.jsxs(S,{size:{xs:4,sm:2},children:[" ",e.jsx(I,{control:e.jsx(T,{checked:t,onChange:()=>C(o),size:"small",disabled:r}),label:`${o+1}周`,sx:{"& .MuiFormControlLabel-label":{fontSize:"0.875rem"},m:0}})]},o))}),e.jsxs(u,{sx:{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"flex-start",mt:1},children:[e.jsx(m,{size:"small",variant:"text",onClick:z,disabled:r,children:"全选"}),e.jsx(m,{size:"small",variant:"text",onClick:B,disabled:r,children:"清空"}),e.jsx(m,{size:"small",variant:"text",onClick:v,disabled:r,children:"单周"}),e.jsx(m,{size:"small",variant:"text",onClick:g,disabled:r,children:"双周"})]}),d&&e.jsx(E,{error:c,sx:{mt:.5,ml:0},children:d})]})};export{_ as W};
