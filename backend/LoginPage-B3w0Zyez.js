import{r as s,u as b,a as v,b as w,c as y,j as e,T as r,B as C,d as S,C as T,l as B}from"./index-CKLgkD1v.js";import{A}from"./Alert-DDDj34Iz.js";import{T as p}from"./TextField-CAILEkKj.js";import"./Select-JmEIo2-X.js";const W=()=>{var c,m;const[o,h]=s.useState(""),[n,x]=s.useState(""),g=b(),i=v(),f=w(),{isLoading:a,error:u,isAuthenticated:l}=y(t=>t.auth),d=((m=(c=f.state)==null?void 0:c.from)==null?void 0:m.pathname)||"/app";s.useEffect(()=>{l&&i(d,{replace:!0})},[l,i,d]);const j=t=>{t.preventDefault(),g(B({username:o,password_hash:n}))};return e.jsxs(e.Fragment,{children:[" ",e.jsx(r,{component:"h1",variant:"h4",align:"center",gutterBottom:!0,children:"课表管理系统"}),e.jsx(r,{component:"h2",variant:"h5",align:"center",children:"登录"}),u&&e.jsx(A,{severity:"error",sx:{width:"100%",mt:2},children:u}),e.jsxs(C,{component:"form",onSubmit:j,noValidate:!0,sx:{mt:1},children:[e.jsx(p,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"用户名 (学号/工号)",name:"username",autoComplete:"username",autoFocus:!0,value:o,onChange:t=>h(t.target.value),disabled:a}),e.jsx(p,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"密码",type:"password",id:"password",autoComplete:"current-password",value:n,onChange:t=>x(t.target.value),disabled:a}),e.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:a,children:a?e.jsx(T,{size:24,color:"inherit"}):"登 录"}),e.jsxs(r,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:2},children:["模拟用户 (密码: password):",e.jsx("br",{}),"学生: S12345 | 教师: T9876 | 管理员: admin"]})]})]})};export{W as default};
